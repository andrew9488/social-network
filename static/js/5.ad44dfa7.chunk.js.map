{"version":3,"sources":["components/Users/Users.module.css","components/Users/User.module.css","components/common/Paginator/Paginator.module.css","components/Users/User.tsx","components/common/Paginator/Paginator.tsx","components/common/SearchField/SearchField.tsx","components/Users/Users.tsx","components/Users/UsersContainer.tsx"],"names":["module","exports","User","React","memo","props","className","style","user","userAvatar","to","id","src","photos","small","UsersPhoto","alt","userData","name","status","followed","disabled","followingInProgress","some","onClick","unFollowTC","followTC","Paginator","useState","portionNumber","setPortionNumber","countPage","Math","ceil","totalCount","pageSize","pages","i","push","portionCount","leftPortionPageNumber","rightPortionPageNumber","paginator","filter","p","map","index","onClickCurrentPage","currentPage","SearchField","enableReinitialize","initialValues","term","friend","onSubmit","values","getUsers","type","autoComplete","as","value","Users","history","useHistory","useEffect","parsed","querystring","location","search","substr","actualPage","actualTerm","actualFriend","page","Number","getUsersTC","query","String","pathname","PATH","USERS","usersPage","isFetching","Preloader","container","u","UsersContainer","this","Fragment","PureComponent","compose","connect","state","users","disableButton","withAuthRedirect"],"mappings":"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","file":"static/js/5.ad44dfa7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Users_usersPage__3EiO7\",\"container\":\"Users_container__1wJvV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__u-ni-\",\"userAvatar\":\"User_userAvatar__2YTUN\",\"userData\":\"User_userData__15nCn\",\"name\":\"User_name__32ePm\",\"status\":\"User_status__2z335\",\"location\":\"User_location__1EDt4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__2h5rT\",\"currentPage\":\"Paginator_currentPage__2jLvZ\"};","import {UserType} from \"../../redux/usersPageReducer\";\r\nimport React from \"react\";\r\nimport style from \"./User.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport UsersPhoto from \"../../assets/images/avatars/usersAvatar.jpg\";\r\n\r\ntype UserPropsType = {\r\n    user: UserType\r\n    followingInProgress: Array<number>\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void\r\n}\r\nexport const User: React.FC<UserPropsType> = React.memo((props) => {\r\n\r\n    return (\r\n        <div className={style.user}>\r\n            <div className={style.userAvatar}>\r\n                <NavLink to={\"/profile/\" + props.user.id}>\r\n                    <img src={props.user.photos.small !== null ? props.user.photos.small : UsersPhoto}\r\n                         alt=\"avatar\"/>\r\n                </NavLink>\r\n            </div>\r\n            <div className={style.userData}>\r\n                <span className={style.name}>{props.user.name}</span>\r\n                <span\r\n                    className={style.status}>{props.user.status !== null ? props.user.status : \"I have not status\"}</span>\r\n            </div>\r\n            <div>\r\n                {\r\n                    !props.user.followed\r\n                        ? <button disabled={props.followingInProgress.some(id => id === props.user.id)}\r\n                                  onClick={() => {\r\n                                      props.followTC(props.user.id)\r\n                                  }}>follow</button>\r\n                        : <button disabled={props.followingInProgress.some(id => id === props.user.id)}\r\n                                  onClick={() => {\r\n                                      props.unFollowTC(props.user.id)\r\n                                  }}>unfollow</button>\r\n                }\r\n                <button>message</button>\r\n            </div>\r\n        </div>\r\n    )\r\n})","import React, {useState} from \"react\";\r\nimport style from \"./Paginator.module.css\";\r\n\r\ntype PaginatorPropsType = {\r\n    totalCount: number\r\n    pageSize: number\r\n    onClickCurrentPage: (page: number) => void\r\n    currentPage: number\r\n}\r\n\r\nexport const Paginator: React.FC<PaginatorPropsType> = React.memo((props) => {\r\n\r\n    const [portionNumber, setPortionNumber] = useState<number>(1)\r\n\r\n    let countPage = Math.ceil(props.totalCount / props.pageSize)\r\n    let pages = []\r\n    for (let i = 1; i <= countPage; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    let portionSize = 10;\r\n    let portionCount = Math.ceil((countPage / portionSize))\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n    return (\r\n        <div className={style.paginator}>\r\n            {portionNumber > 1 &&\r\n            <button onClick={() => setPortionNumber(portionNumber - 1)}>{`<`}</button>}\r\n            {pages.filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map((p, index) => {\r\n                    return <span key={index} onClick={() => {\r\n                        props.onClickCurrentPage(p)\r\n                    }}\r\n                                 className={props.currentPage === p ? style.currentPage : ''}>{p}</span>\r\n                })}\r\n            {portionCount > portionNumber &&\r\n            <button onClick={() => setPortionNumber(portionNumber + 1)}>{`>`}</button>}\r\n        </div>\r\n    )\r\n})\r\n","import {Field, Form, Formik} from \"formik\";\r\nimport React from \"react\";\r\n\r\ntype SearchFieldPropsType = {\r\n    getUsers: (currentPage: number, pageSize: number, term: string | null, friend: null | boolean) => void\r\n    pageSize: number\r\n    term: null | string\r\n    friend: null | boolean\r\n}\r\n\r\nexport const SearchField: React.FC<SearchFieldPropsType> = React.memo((props) => {\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            initialValues={{term: props.term, friend: props.friend}}\r\n            onSubmit={(values) => {\r\n                props.getUsers(1, props.pageSize, values.term, values.friend)\r\n            }}\r\n        >\r\n            <Form>\r\n                <Field type=\"text\" name=\"term\" autoComplete=\"off\"/>\r\n                <Field as=\"select\" name=\"friend\">\r\n                    <option value=\"null\">All</option>\r\n                    <option value=\"true\">Followed</option>\r\n                    <option value=\"false\">Unfollowed</option>\r\n                </Field>\r\n                <button type=\"submit\">find</button>\r\n            </Form>\r\n        </Formik>\r\n    );\r\n})","import React, {useEffect} from \"react\";\r\nimport style from \"./Users.module.css\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {UsersPropsType} from \"./UsersContainer\";\r\nimport {User} from \"./User\";\r\nimport {Paginator} from \"../common/Paginator/Paginator\";\r\nimport {SearchField} from \"../common/SearchField/SearchField\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {PATH} from \"../Routes/Routes\";\r\nimport * as querystring from \"querystring\";\r\n\r\ntype QueryObjType = { term?: string, friend?: string, page?: string }\r\nexport const Users: React.FC<UsersPropsType> = React.memo((props) => {\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const parsed = querystring.parse(history.location.search.substr(1)) as QueryObjType\r\n        let actualPage = props.currentPage\r\n        let actualTerm = props.term !== null ? props.term : \"\"\r\n        let actualFriend = props.friend\r\n\r\n        if (!!parsed.page) actualPage = Number(parsed.page)\r\n        if (!!parsed.term) actualTerm = parsed.term\r\n        // parsed.term !== \"null\" ? actualTerm = parsed.term as string : actualTerm = \"\"\r\n\r\n        switch (parsed.friend) {\r\n            case \"null\":\r\n                actualFriend = null\r\n                break\r\n            case \"true\":\r\n                actualFriend = true\r\n                break\r\n            case \"false\":\r\n                actualFriend = false\r\n                break\r\n        }\r\n        props.getUsersTC(actualPage, props.pageSize, actualTerm, actualFriend)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const query: QueryObjType = {}\r\n        if (!!props.term) query.term = props.term\r\n        if (props.friend !== null) query.friend = String(props.friend)\r\n        if (props.currentPage !== 1) query.page = String(props.currentPage)\r\n\r\n        history.push({\r\n            pathname: PATH.USERS,\r\n            search: querystring.stringify(query)\r\n        })\r\n    }, [props.term, props.friend, props.currentPage])\r\n\r\n    return (\r\n        <div className={style.usersPage}>\r\n            <SearchField getUsers={props.getUsersTC}\r\n                         pageSize={props.pageSize}\r\n                         term={props.term}\r\n                         friend={props.friend}\r\n            />\r\n            <Paginator totalCount={props.totalCount}\r\n                       pageSize={props.pageSize}\r\n                       onClickCurrentPage={props.onClickCurrentPage}\r\n                       currentPage={props.currentPage}/>\r\n            {props.isFetching ? <Preloader/>\r\n                : <div className={style.container}>\r\n                    {\r\n                        props.usersPage.map(u => <User key={u.id}\r\n                                                       user={u}\r\n                                                       followingInProgress={props.followingInProgress}\r\n                                                       followTC={props.followTC}\r\n                                                       unFollowTC={props.unFollowTC}/>)\r\n                    }\r\n                </div>}\r\n        </div>\r\n    );\r\n})\r\n\r\n\r\n","import {connect} from \"react-redux\";\r\nimport {followTC, getUsersTC, unFollowTC, UserType} from \"../../redux/usersPageReducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport React, {ComponentType} from \"react\";\r\nimport {Users} from \"./Users\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\ntype UsersClassContainerPropsType = {\r\n    usersPage: Array<UserType>\r\n    pageSize: number\r\n    totalCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    disableButton: boolean\r\n    followingInProgress: Array<number>\r\n    getUsersTC: (currentPage: number, pageSize: number, term: string |  null, friend: null | boolean) => void\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void,\r\n    term: null | string\r\n    friend: null | boolean\r\n}\r\n\r\ntype MapStatePropsType = {\r\n    usersPage: Array<UserType>\r\n    pageSize: number\r\n    totalCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    disableButton: boolean\r\n    followingInProgress: Array<number>\r\n    term: null | string\r\n    friend: null | boolean\r\n}\r\n\r\n\r\ntype MapDispatchPropsType = {\r\n    getUsersTC: (currentPage: number, pageSize: number, term: string | null, friend: null | boolean) => void\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void\r\n}\r\n\r\ntype OwnTypeProps = {\r\n    onClickCurrentPage: (page: number) => void\r\n}\r\n\r\nexport type UsersPropsType = MapStatePropsType & MapDispatchPropsType & OwnTypeProps\r\n\r\nclass UsersContainer extends React.PureComponent<UsersClassContainerPropsType> {\r\n\r\n    componentDidMount() {\r\n        this.props.getUsersTC(this.props.currentPage, this.props.pageSize, \"\", null)\r\n    }\r\n\r\n    onClickCurrentPage = (page: number) => {\r\n        this.props.getUsersTC(page, this.props.pageSize, this.props.term, this.props.friend)\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Users {...this.props}\r\n                       onClickCurrentPage={this.onClickCurrentPage}\r\n                />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        usersPage: state.usersPage.users,\r\n        pageSize: state.usersPage.pageSize,\r\n        totalCount: state.usersPage.totalCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress,\r\n        disableButton: state.usersPage.disableButton,\r\n        term: state.usersPage.filter.term,\r\n        friend: state.usersPage.filter.friend\r\n    }\r\n}\r\n\r\nexport default compose<ComponentType>(\r\n    connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>(mapStateToProps,\r\n        {getUsersTC, followTC, unFollowTC}), withAuthRedirect)(UsersContainer)"],"sourceRoot":""}